<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Git 参考手册 - My Lives</title>
    <meta property="og:title" content="Git 参考手册 - My Lives">
    

    
      
    

    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/blog/css/style.css" />
    <link rel="stylesheet" href="/blog/css/fonts.css" />
    <link rel="stylesheet" href="/blog/css/custom.css" />

  </head>

  
  <body class="blog">
    <header class="masthead">
      <h1><a href="/blog/">My Lives</a></h1>



      <nav class="menu">
        <input id="menu-check" type="checkbox" />
        <label id="menu-label" for="menu-check" class="unselectable">
          <span class="icon close-icon">✕</span>
          <span class="icon open-icon">☰</span>
          <span class="text">Menu</span>
        </label>
        <ul>
        
        
        <li><a href="/blog/">Home</a></li>
        
        <li><a href="/blog/en/">English</a></li>
        
        <li><a href="/blog/cn/">Chinese</a></li>
        
        <li><a href="/blog/paper/">Paper Reading</a></li>
        
        <li><a href="/blog/travel/">Travel</a></li>
        
        
        </ul>
      </nav>
    </header>

    <article class="main">
      <header class="title">
      
<h1>Git 参考手册</h1>

<h3>
  2017-09-07</h3>
<hr>


      </header>





<p>Git <a href="https://git-scm.com/book/zh/v2">参考手册中文1</a> <br>
Git <a href="http://gitref.justjavac.com/">参考手册中文2</a> <br>
Git <a href="https://git-scm.com/about">参考手册ENG</a></p>

<hr />

<h1 id="git-branch-命令">git branch 命令</h1>

<pre><code>git branch 列出所有分支
git branch -v 查看每一个分支的最后一次提交
git branch -d hotfix 表示删除hotfix分支  
【git 删除本地分支】
git branch -D br

【git 删除远程分支】
git push origin :br  (origin 后面有空格) 
或者
$ git push origin --delete serverfix

--merged 与 --no-merged 这两个有用的选项可以过滤这个列表中已经合并或尚未合
并到当前分支的分支如果要查看哪些分支已经合并到当前分支，可以运行 git branch --merged：
git branch --merged在这个列表中分支名字前没有 * 号的分支通常可以使用 git branch -d 删除掉
</code></pre>

<h1 id="git-checkout-命令">git checkout 命令</h1>

<pre><code>git checkout -b 创建新分支，并立即切换到它。

与以下等效：
git branch newbranch 
git checkout newbranch
</code></pre>

<h1 id="git-merge命令">git merge命令</h1>

<pre><code>git merge [branch] 将[branch] 分枝合并到当前分支中

例如,首先切换到master分支，然后将hotfix分支合并到master分支
git checkout master
git merge hotfix

git merge origin/serverfix 将远程git服务器origin的serverfix合并到当前分支
</code></pre>

<h1 id="git-add-命令">git add 命令</h1>

<p><code>git add xx</code>命令可以将xx文件添加到暂存区，</p>

<pre><code>git add .     提交被修改的和新建的文件，添加全部修改或新增的文件但不包括被删除的文件          
git add -u    --update  update tracked files  更新所有改变的文件，即提交所有变化的文件,表示添加编辑或者删除的文件，不包括新添加的文件
git add -A    --all   add changes from all tracked and untracked files   提交已被修改和已被删除文件，但是不包括新的文件
git add -A . 如果有很多改动，可以一次添加所有改变的文件（注意 `-A` 选项后面还有一个句点）。
</code></pre>

<h1 id="git-commit命令">git commit命令</h1>

<pre><code>git commit -a -m &quot;commit discription&quot;  &quot;-a&quot; 表示git add，&quot;-m&quot;表示commit的注释
</code></pre>

<h1 id="git-push-命令">git push 命令</h1>

<pre><code> git push [alias] [branch]，就会将你的[branch]分支推送成为[alias]远端上的同名[branch] 分支
</code></pre>

<h1 id="git-fetch-命令">git fetch 命令</h1>

<pre><code>从服务器上抓取本地没有的数据时，它并不会修改工作目录中的内容。它只会获取数据然后
让你自己合并。
</code></pre>

<h1 id="git-pull-命令">git pull 命令</h1>

<pre><code>在大多数情况下它的含义是一个 git fetch 紧接着一个git merge 命令
</code></pre>

<h1 id="删除commit">删除commit</h1>

<pre><code>git reset --hard HEAD~3 删除最顶部的3个commit
git reset --hard commit-id 回滚到commit-id,将commit-id之后提交的commit都去除

【远程代码库回滚】：
应用场景：自动部署系统发布后发现问题，需要回滚到某一个commit，再重新发布
原理：先将本地分支退回到某个commit，删除远程分支，再重新push本地分支
操作步骤：
1、git checkout the_branch
2、git pull
3、git branch the_branch_backup //备份一下这个分支当前的情况
4、git reset --hard the_commit_id //把the_branch本地回滚到the_commit_id
5、git push origin :the_branch //删除远程 the_branch
6、git push origin the_branch //用回滚后的本地分支重新建立远程分支
7、git push origin :the_branch_backup //如果前面都成功了，删除这个备份分支
</code></pre>

<hr />

<h1 id="git-学习">Git 学习</h1>

<h1 id="1-初始化git">1.初始化Git</h1>

<p>初始化后，在当前目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中</p>

<pre><code>cd D:/Test
git init
</code></pre>

<p>如果当前目录下有几个文件想要纳入版本控制，需要先用 git add 命令告诉 Git 开始对这些文件进行跟踪，然后提交：</p>

<pre><code>git add *.c
git add README
git commit -m 'initial project version'
</code></pre>

<h2 id="从现有仓库克隆">从现有仓库克隆</h2>

<pre><code>git clone git://github.com/schacon/grit.git  +目录(可选，指定存的目录)
</code></pre>

<h2 id="检查当前文件状态">检查当前文件状态</h2>

<pre><code>git status
On branch master
nothing to commit, working directory clean
</code></pre>

<h2 id="跟踪新文件">跟踪新文件</h2>

<p>git add 将 修改文件放到暂存区，然后再看看 git status 的输出</p>

<pre><code>git add README
git status
</code></pre>

<h2 id="提交更新">提交更新</h2>

<pre><code>git commit -m &quot;commit message&quot;
</code></pre>

<p>git commit 加上 -a 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤：</p>

<h2 id="移除文件">移除文件</h2>

<pre><code>rm grit.gemspec #问磁盘中删除文件
git rm grit.gemspec#从git 跟踪中删除
#如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母），以防误删除文件后丢失修改的内容

#只想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。换句话说，仅是从跟踪清单中删除。比如一些大型日志文件或者一堆 .a 编译文件，不小心纳入仓库后，要移除跟踪但不删除文件，以便稍后在 .gitignore 文件中补上，用 --cached 选项即可
git rm --cached readme.txt
</code></pre>

<h2 id="移动文件">移动文件</h2>

<pre><code>git mv file_from file_to

#其实，运行 git mv 就相当于运行了下面三条命令：
$ mv README.txt README
$ git rm README.txt
$ git add README
</code></pre>

<h2 id="忽略某些文件">忽略某些文件</h2>

<p>创建一个名为 .gitignore 的文件，列出要忽略的文件模式。</p>

<pre><code>$ cat .gitignore
*.[oa]
*~
</code></pre>

<p>第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。
第二行告诉 Git 忽略所有以波浪符（~）结尾的文件。</p>

<p>文件 .gitignore 的格式规范如下：</p>

<ul>
<li>所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。</li>
<li>可以使用标准的 glob 模式匹配。</li>
<li>匹配模式最后跟反斜杠（/）说明要忽略的是目录。</li>
<li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。</li>
</ul>

<p>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（*）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。</p>

<p>我们再看一个 .gitignore 文件的例子</p>

<pre><code># 此为注释 – 将被 Git 忽略
# 忽略所有 .a 结尾的文件
*.a
# 但 lib.a 除外
!lib.a
# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
/TODO
# 忽略 build/ 目录下的所有文件
build/
# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
doc/*.txt
# 忽略 doc/ 目录下所有扩展名为 txt 的文件
doc/**/*.txt
</code></pre>

<h2 id="远程仓库">远程仓库</h2>

<p>可以指定选项 -v，会显示需要读写远程仓库使用的 Git 保存的简写与其对应的 URL</p>

<pre><code>git remote -v

添加远程仓库
git remote add &lt;shortname&gt; &lt;url&gt;添加一个新的远程 Git 仓库，同时指定一个你可以轻松引用的简

从远程仓库中抓取与拉取
git fetch [remote-name]
git fetch 命令会将数据拉取到你的本地仓库,并不会自动合并或修改你当前的工作。当准备好时你必须手动将其合并入你的工作。

git pull 命令来自动的抓取然后合并远程分支到当前分支。

推送到远程仓库
git push [remote-name] [branchname]

当你想要将 master 分支推送到 origin 服务器时（再次说明，克隆时通常会自动帮你设置好那两个名
字），那么运行这个命令就可以将你所做的备份到服务器：
git push origin master
</code></pre>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/blog/cn/2017/09/css-study/">层叠样式表 (Cascading Style Sheets)小结</a></span>
  <span class="nav-next"><a href="/blog/cn/2017/09/ontology/">基因本体论(Gene Ontology) 与通路分析(Pathway Analysis)</a> &rarr;</span>
</nav>





<script src="//yihui.name/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">&copy; <a href="xxxx">Who care</a> 2017 - Forever, maybe</div>
  
  </footer>
  </article>
  
  </body>
</html>

